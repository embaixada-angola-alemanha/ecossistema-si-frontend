<section class="page-header">
  <div class="container">
    <h1>{{ 'events.title' | translate }}</h1>
  </div>
</section>

<section class="section">
  <div class="container">
    @if (events().length === 0 && !loading()) {
      <p class="no-events">{{ 'events.no_events' | translate }}</p>
    } @else {
      <div class="events-grid">
        @for (event of events(); track event.id) {
          <a [routerLink]="['/eventos', event.id]" class="event-card">
            <div class="event-card__date-block">
              <span class="event-card__day">{{ event.dataInicio | date:'dd' }}</span>
              <span class="event-card__month">{{ event.dataInicio | date:'MMM yyyy' }}</span>
            </div>
            <div class="event-card__body">
              <h3 class="event-card__title">{{ event | localizedEvent:'titulo' }}</h3>
              <p class="event-card__excerpt">{{ event | localizedEvent:'descricao' }}</p>
              <div class="event-card__meta">
                @if (event.tipoEvento) {
                  <span class="event-card__type">{{ event.tipoEvento }}</span>
                }
                <span class="event-card__location">
                  <span class="material-icons-outlined">place</span>
                  {{ event | localizedEvent:'local' }}
                </span>
              </div>
            </div>
          </a>
        }
      </div>

      @if (hasMore()) {
        <div class="load-more">
          <button class="btn btn--outline" (click)="loadMore()" [disabled]="loading()">
            {{ 'events.load_more' | translate }}
          </button>
        </div>
      }
    }

    @if (loading() && events().length === 0) {
      <p class="loading-text">{{ 'common.loading' | translate }}</p>
    }
  </div>
</section>
